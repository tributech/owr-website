---
/**
 * Hero section with rotating battle backgrounds and global search.
 * Background images rotate client-side every 8 seconds.
 */
import GlobalSearch from './GlobalSearch';

const heroImages = Array.from({ length: 16 }, (_, i) => `/images/landing/image${i + 1}.jpg`);
---

<section class="relative min-h-[70vh] flex items-center justify-center pt-16 pb-12">
  <!-- Background with overlay -->
  <div class="absolute inset-0 bg-black" id="hero-bg">
    {heroImages.map((src, i) => (
      <div
        class:list={[
          'hero-slide absolute inset-0 transition-opacity duration-1000',
          i === 0 ? 'opacity-40' : 'opacity-0',
        ]}
        data-index={i}
      >
        <img src={src} alt="" class="w-full h-full object-cover" loading={i === 0 ? 'eager' : 'lazy'} />
      </div>
    ))}
    <div class="absolute inset-0 bg-black/20"></div>
  </div>

  <!-- Content -->
  <div class="relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <img
      src="/images/owr_logo_white.png"
      alt="Old World Rankings"
      class="mx-auto mb-8 h-24 w-24 sm:h-32 sm:w-32"
    />

    <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6 text-balance">
      The Complete Companion to The Old World
    </h1>

    <p class="text-lg sm:text-xl text-white/80 mb-8">
      Host, Find &amp; Play Events &middot; Create Army Lists &middot; Track Faction Meta &amp; Rankings
    </p>

    <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-12">
      <a
        href="#regions"
        class="w-full sm:w-auto px-8 py-3 bg-owr-gold text-gray-900 font-semibold rounded-lg hover:bg-owr-gold-dark transition-colors text-center"
      >
        Find Your Region
      </a>
      <a
        href="#hosting"
        class="w-full sm:w-auto px-8 py-3 bg-transparent border border-white/50 text-white font-medium rounded-lg hover:bg-white/10 transition-colors text-center"
      >
        Host Your Tournament
      </a>
    </div>

    <GlobalSearch client:load />
  </div>
</section>

<script>
  // ── Hero image rotation ───────────────────────────────────────────
  const slides = document.querySelectorAll('.hero-slide');
  let current = 0;
  if (slides.length > 1) {
    setInterval(() => {
      slides[current].classList.remove('opacity-40');
      slides[current].classList.add('opacity-0');
      current = (current + 1) % slides.length;
      slides[current].classList.remove('opacity-0');
      slides[current].classList.add('opacity-40');
    }, 8000);
  }
</script>
