---
interface SidebarCategory {
  title: string;
  slug: string;
  articles: { title: string; slug: string }[];
}

interface Props {
  categories: SidebarCategory[];
  currentSlug: string;
}

const { categories, currentSlug } = Astro.props;
---

<aside class="w-full lg:w-64 shrink-0">
  <nav class="sticky top-24 space-y-6 max-h-[calc(100vh-8rem)] overflow-y-auto">
    {categories.map((cat) => (
      <div>
        <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">
          {cat.title}
        </h4>
        <ul class="space-y-0.5">
          {cat.articles.map((article, index) => {
            const isActive = article.slug === currentSlug;
            return (
              <li>
                <a
                  href={`/docs/${article.slug}`}
                  class:list={[
                    'flex items-center gap-2 px-3 py-1.5 rounded-md text-sm transition-colors',
                    isActive
                      ? 'bg-owr-gold/10 text-owr-gold-dark font-medium'
                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-800',
                  ]}
                >
                  <span
                    class:list={[
                      'inline-flex items-center justify-center w-5 h-5 rounded-full text-[10px] font-semibold shrink-0',
                      isActive
                        ? 'bg-owr-gold/20 text-owr-gold-dark'
                        : 'bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-400',
                    ]}
                  >
                    {index + 1}
                  </span>
                  <span class="truncate">{article.title}</span>
                </a>
              </li>
            );
          })}
        </ul>
      </div>
    ))}
    <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
      <a href="/docs" class="text-sm text-gray-500 hover:text-gray-900 dark:hover:text-white transition-colors">
        &larr; All docs
      </a>
    </div>
  </nav>
</aside>
