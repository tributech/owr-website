---
const APP_URL = import.meta.env.PUBLIC_APP_URL || 'https://oldworldrankings.com';

const features = [
  {
    title: 'Player Rankings',
    description: 'Track your standing across global, regional, and faction leaderboards with our comprehensive ranking system.',
    href: `${APP_URL}/global_rankings`,
    icon: 'trophy',
  },
  {
    title: 'Tournament Finder',
    description: 'Discover upcoming events near you, register online, and track your tournament history in one place.',
    href: '#regions',
    icon: 'calendar',
  },
  {
    title: 'Army Lists',
    description: 'Browse and share army lists. See what the top players are fielding and get inspiration for your next build.',
    href: `${APP_URL}/army_lists`,
    icon: 'swords',
  },
  {
    title: 'Army Galleries',
    description: 'Showcase your painted armies and explore galleries from players around the world.',
    href: `${APP_URL}/galleries`,
    icon: 'image',
  },
  {
    title: 'Army Builder',
    description: 'Build and validate your army lists with our integrated army builder. Syncs across all devices.',
    href: `${APP_URL}/builder`,
    icon: 'hammer',
    badge: 'Pro',
    isNew: true,
  },
  {
    title: 'Mobile App',
    description: 'Access your army lists, check rankings, and stay updated on the go with our mobile companion app.',
    href: '#mobile',
    icon: 'smartphone',
    badge: 'Pro',
    isNew: true,
  },
];

const iconPaths: Record<string, string> = {
  trophy: 'M6 9H4.5a2.5 2.5 0 010-5H6m12 5h1.5a2.5 2.5 0 000-5H18M9 21h6m-3-3v3M5 4h14l-1 7a5 5 0 01-12 0L5 4z',
  calendar: 'M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z',
  swords: 'M14.5 2l6 6-8 8-6-6 8-8zM3.5 21.5l5-5M2 22l1.5-1.5',
  image: 'M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z',
  hammer: 'M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z',
  smartphone: 'M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z',
};
---

<section id="features" class="bg-white py-16 sm:py-24 scroll-mt-20 dark:bg-gray-900">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-4">Everything You Need</h2>
      <p class="text-gray-500 dark:text-gray-400 max-w-2xl mx-auto">
        From tracking your competitive journey to finding your next event, OWR has you covered.
      </p>
    </div>

    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {features.map((feature) => (
        <a
          href={feature.href}
          class="group relative p-6 rounded-xl border border-gray-200 bg-gray-50 hover:border-gray-400 transition-all dark:bg-gray-800 dark:border-gray-700 dark:hover:border-gray-500"
        >
          {feature.isNew && (
            <span class="absolute top-3 right-3 px-2 py-0.5 text-xs font-semibold bg-green-500 text-white rounded-full">
              New
            </span>
          )}
          <div class="w-12 h-12 rounded-lg bg-gray-900 flex items-center justify-center mb-4 group-hover:scale-105 transition-transform">
            <svg class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d={iconPaths[feature.icon] || ''} />
            </svg>
          </div>
          <div class="flex items-center gap-2 mb-2">
            <h3 class="font-semibold text-gray-900 dark:text-white">{feature.title}</h3>
            {feature.badge && (
              <span class="px-2 py-0.5 text-xs font-medium bg-owr-gold text-gray-900 rounded-full">
                {feature.badge}
              </span>
            )}
          </div>
          <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed">{feature.description}</p>
        </a>
      ))}
    </div>
  </div>
</section>
