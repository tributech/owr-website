---
interface Props {
  title: string;
  date: string;
  category: string;
  bodyHtml: string;
}

const { title, date, category, bodyHtml } = Astro.props;

const badgeClasses: Record<string, string> = {
  New: 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300',
  Improvement: 'bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300',
  Fix: 'bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300',
};

const badge = badgeClasses[category] || 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';

const formattedDate = new Date(date).toLocaleDateString('en-GB', {
  day: 'numeric',
  month: 'long',
  year: 'numeric',
});
---

<article class="relative pl-8 pb-8 border-l-2 border-gray-200 dark:border-gray-700 last:pb-0">
  <!-- Timeline dot -->
  <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white dark:bg-gray-900 border-2 border-gray-300 dark:border-gray-600"></div>

  <div class="rounded-xl border border-gray-200 bg-white dark:bg-gray-800 dark:border-gray-700 p-5">
    <div class="flex flex-wrap items-center gap-3 mb-3">
      <span class:list={['inline-block rounded-full px-2.5 py-0.5 text-xs font-semibold', badge]}>
        {category}
      </span>
      <time datetime={date} class="text-sm text-gray-500">{formattedDate}</time>
    </div>

    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">{title}</h3>

    <div class="prose prose-gray max-w-none" set:html={bodyHtml} />
  </div>
</article>
